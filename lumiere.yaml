# Lumiere framework configuration
# Infrastructure-level settings for run management and storage

runs:
  checkpoints:
    sources:
      - filesystem
      - azure-blob
    destinations:
      - filesystem
      - azure-blob

storage:
  clients:
    filesystem:
      basedir: ./runs

# Discovery system configuration
# Registry configuration for the discovery system
# Each entry configures how a specific type's registry should be created
discovery:
  registries:
    tokenizer:
      type: "lumiere.tokenizer.Tokenizer"
      name: "tokenizer"
      base_module: "lumiere.tokenizers"
      discovery_paths:
        - "."

    dataset:
      type: "lumiere.data.dataset.Dataset"
      name: "dataset"
      base_module: "lumiere.data.datasets"
      discovery_paths:
        - "."

    pipeline:
      type: "lumiere.data.pipeline.Pipeline"
      name: "pipeline"
      base_module: "lumiere.data.pipelines"
      discovery_paths:
        - "."

    preprocessor:
      type: "lumiere.data.preprocessor.Preprocessor"
      name: "preprocessor"
      base_module: "lumiere.data.preprocessors"
      discovery_paths:
        - "."

    optimizer:
      type: "torch.optim.Optimizer"
      name: "optimizer"
      base_module: "lumiere.nn.optimizers"
      discovery_paths:
        - "."

    scheduler:
      type: "torch.optim.lr_scheduler.LRScheduler"
      name: "scheduler"
      base_module: "lumiere.nn.schedulers"
      discovery_paths:
        - "."

    component:
      type: "torch.nn.Module"
      name: "component"
      base_module: "lumiere.nn"
      discovery_paths:
        - "architectures"
        - "components.attention"
        - "components.feedforward"
        - "components.embedding"
        - "components.blocks"
        - "components.normalization"
      hierarchical: true
